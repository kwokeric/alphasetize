(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){e.exports=a.p+"static/media/camelotWheel.e5374df0.jpg"},106:function(e,t,a){e.exports=a.p+"static/media/icon-tap.402d479e.svg"},107:function(e,t,a){e.exports=a.p+"static/media/icon-bulb.f7ce2008.svg"},108:function(e,t,a){e.exports=a.p+"static/media/icon-gear.04e848f8.svg"},109:function(e,t,a){e.exports=a.p+"static/media/icon-question.2508df20.svg"},110:function(e,t,a){e.exports=a.p+"static/media/controller.793360ab.jpg"},112:function(e,t,a){e.exports=a.p+"static/media/icon-left-arrow.632da169.svg"},113:function(e,t,a){e.exports=a.p+"static/media/icon-search-gray.f18a2231.svg"},114:function(e,t,a){e.exports=a.p+"static/media/icon-dots.47f2dd5e.svg"},115:function(e,t,a){e.exports=a.p+"static/media/icon-playlist.7c421760.svg"},116:function(e,t,a){e.exports=a.p+"static/media/icon-chat.27032140.svg"},117:function(e,t,a){e.exports=a.p+"static/media/icon-code.66441ed5.svg"},118:function(e,t,a){e.exports=a.p+"static/media/icon-music.47bcb49a.svg"},119:function(e,t,a){e.exports=a(282)},147:function(e,t,a){},166:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(21),r=a.n(o),s=a(1),c=a(11),l=a(7),u=a(25),m=a(102),d=a(22),h=a(9),p={isMobile:!1,showAuthModal:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP_STORE_BOOL":return Object(h.a)({},e,Object(d.a)({},t.payload.name,t.payload.bool));default:return e}},f={playlists:[]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAYLISTS":return Object(h.a)({},e,{playlists:t.playlists});default:return e}},g=a(12),E=a.n(g),y={list:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,a=E()([],e.list);switch(t.type){case"ADD_TRACK":return a.push(t.track),Object(h.a)({},e,{list:a});case"REMOVE_TRACK":return a.splice(t.index,1),Object(h.a)({},e,{list:a});case"MOVE_TRACK":var n=a[t.startIndex];return a.splice(t.startIndex,1),a.splice(t.endIndex,0,n),Object(h.a)({},e,{list:a});case"ADD_TRACKS":return a=t.tracks,Object(h.a)({},e,{list:a});default:return e}},M={accessToken:""},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(h.a)({},e,{accessToken:t.accessToken});case"SET_USER":return E()(e,t.user);default:return e}},w=Object(u.c)({app:v,playlists:b,tracks:k,user:N});a(147);var A=a(2),C=a(3),O=a(5),x=a(4),T=a(6),I={setAppStoreBool:function(e,t){return function(a){return a({type:"SET_APP_STORE_BOOL",payload:{name:e,bool:t}})}}},S=a(103),L=a.n(S);function j(e){var t=e.method,a=void 0===t?"get":t,n=e.path,i=e.queryParams,o=void 0===i?{}:i,r=e.header,s=void 0===r?{}:r,c=e.body,l=void 0===c?{}:c;return function(e,t){var i=t().user.accessToken,r={"Content-Type":s.contentType?s.contentType:"application/json",Authorization:"Bearer "+i},c={method:a,url:n,params:o,headers:r,data:l};return L()(c).then(function(e){return e.data}).catch(function(e){return{error:e}})}}var P={spotify:{getUser:function(){return j({path:"https://api.spotify.com/v1/me"})},searchBasic:function(e){return j({path:"https://api.spotify.com/v1/search",queryParams:{q:e,limit:12,type:"track"}})},searchFeatures:function(e){return j({path:"https://api.spotify.com/v1/audio-features",queryParams:{ids:e}})},getPlaylists:function(){return j({path:"https://api.spotify.com/v1/me/playlists?limit=50"})},getPlaylist:function(e){return j({path:"https://api.spotify.com/v1/playlists/"+e})},createPlaylist:function(e){var t=e.userId,a=e.title,n=e.description;return j({path:"https://api.spotify.com/v1/users/".concat(t,"/playlists"),method:"post",body:JSON.stringify({name:a,description:n})})},addTracksToPlaylist:function(e){var t=e.playlistId,a=e.tracks;return j({path:"https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),method:"post",body:JSON.stringify({uris:a})})}}},H={setToken:function(e){return{type:"SET_TOKEN",accessToken:e}},getUser:function(){return function(e,t){return e(P.spotify.getUser()).then(function(t){return t.error&&e(I.setAppStoreBool("showAuthModal",!0)),"Unauthorized"===t.statusText&&(window.location.href="./"),t}).then(function(t){return e(H.setUser(t))})}},setUser:function(e){return{type:"SET_USER",user:e}}},R=H,D=(a(166),{getSpotifyAuthUrl:function(){var e="https://accounts.spotify.com/authorize?";return e+="client_id=b722de12baaf4052a82f8cd762edda76",e+="&scope="+encodeURIComponent("playlist-modify-public"),e+="&response_type=token",e+="&redirect_uri=",e+=window.location.origin+"/create"},isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},lockVerticalScrolling:function(){document.body.classList.add("lock-vertical-scroll")},unlockVerticalScrolling:function(){document.body.classList.remove("lock-vertical-scroll")},addBlur:function(){document.getElementById("root").classList.add("blur")},removeBlur:function(){document.getElementById("root").classList.remove("blur")}}),B={KEYCODE_TO_KEY:{0:"C",1:"Db",2:"D",3:"Eb",4:"E",5:"F",6:"Gb",7:"G",8:"Ab",9:"A",10:"Bb",11:"B"},KEYCODE_TO_CAMELOT_KEY:{Abm:"1A",B:"1B",Ebm:"2A",Gb:"2B",Bbm:"3A",Db:"3B",Fm:"4A",Ab:"4B",Cm:"5A",Eb:"5B",Gm:"6A",Bb:"6B",Dm:"7A",F:"7B",Am:"8A",C:"8B",Em:"9A",G:"9B",Bm:"10A",D:"10B",Gbm:"11A",A:"11B",Dbm:"12A",E:"12B"}},_={CREAT_URI:"/create"},U=E()({},B,_),W=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.forEach(function(t){t&&("string"===typeof t?e.push(t):"object"!==typeof t||t instanceof Array||Object.entries(t).forEach(function(t){t[1]&&e.push(t[0])}))}),e.join(" ")},z={getUrlParams:function(){for(var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);e=a.exec(n);)t[e[1]]=decodeURIComponent(e[2]);return t}},K=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleMouseOver=function(){a.setState({authHover:!0})},a.handleMouseLeave=function(){a.setState({authHover:!1})},a.handleSpotifyAuth=function(e){e.preventDefault();var t=a.props,n=t.token,i=t.history;z.getUrlParams().access_token||n?(console.log("Already authenticated!"),i.push(U.CREAT_URI)):window.location.href=D.getSpotifyAuthUrl()},a.state={authHover:!1},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.token,t=this.state.authHover;return i.a.createElement("div",{className:W("AuthButton-button",{"AuthButton-button-hover":t}),onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,onClick:this.handleSpotifyAuth},t?i.a.createElement("div",{className:"AuthButton-hovered"},e?"SEARCH":"SPOTIFY LOGIN"):"GET STARTED")}}]),t}(n.Component),F=Object(l.d)(Object(s.b)(function(e){return{token:e.user.token}})(K)),Y=(a(172),function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).getActiveTab=function(){var e=a.props.pathname,t=document.getElementById("tab-home");try{t=a[e.split("/").join("").toLowerCase()+"Ref"].current}catch(n){}return t},a.handleMouseEnter=function(e){if(a.props.pathname.split("/").join("")!==e){var t=a[e+"Ref"].current;a.setState({underlineColor:"#2799aa",underlineWidth:t.offsetWidth,underlinePosX:t.offsetLeft})}},a.handleMouseLeave=function(){var e=a.getActiveTab();a.setState({underlineColor:"#000000",underlineWidth:e.offsetWidth,underlinePosX:e.offsetLeft})},a.state={activeTab:a.props.pathname.split("/").join(""),underlinePosX:0,underlineWidth:0,showLine:!1},a.aboutRef=i.a.createRef(),a.createRef=i.a.createRef(),a.contactRef=i.a.createRef(),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getActiveTab();setTimeout(function(){e.setState({underlineWidth:t.offsetWidth,underlinePosX:t.offsetLeft,showLine:!0})},500)}},{key:"componentDidUpdate",value:function(e){if(this.props.pathname!==e.pathname){var t=this.getActiveTab();this.setState({underlineWidth:t.offsetWidth,underlinePosX:t.offsetLeft,underlineColor:"#000"})}}},{key:"render",value:function(){var e=this,t=this.props.pathname,a=this.state,n=a.underlineColor,o=a.underlineWidth,r=a.underlinePosX,s=a.showLine,l={backgroundColor:n,width:o-32,left:r+16};return i.a.createElement("div",{className:"Header"},i.a.createElement("div",{className:"Header-cont"},i.a.createElement("div",{className:"Header-logo"},"Alphasetize"),i.a.createElement("div",{className:"Header-tabs"},i.a.createElement("div",{className:W("Header-underline",{"Header-underline-show":s}),style:l}),i.a.createElement("div",{id:"tab-home",className:W("Header-tab",{"Header-tab-active":"/about"===t||"/"===t}),ref:this.aboutRef,onMouseEnter:function(){return e.handleMouseEnter("about")},onMouseLeave:function(){return e.handleMouseLeave("about")}},i.a.createElement(c.b,{to:"/"},"ABOUT")),i.a.createElement("div",{id:"tab-create",className:W("Header-tab",{"Header-tab-active":"/create"===t}),ref:this.createRef,onMouseEnter:function(){return e.handleMouseEnter("create")},onMouseLeave:function(){return e.handleMouseLeave("create")}},i.a.createElement(c.b,{to:"/create"},"CREATE")),i.a.createElement("div",{id:"tab-contact",className:W("Header-tab",{"Header-tab-active":"/contact"===t}),ref:this.contactRef,onMouseEnter:function(){return e.handleMouseEnter("contact")},onMouseLeave:function(){return e.handleMouseLeave("contact")}},i.a.createElement(c.b,{to:"/contact"},"CONTACT")))))}}]),t}(n.Component)),q=(a(173),function(){var e=(new Date).getFullYear();return i.a.createElement("div",{className:"Footer"},i.a.createElement("div",{className:"Footer-section"},i.a.createElement("div",{className:"Footer-left"},"\xa9 ".concat(e," Alphasetize")),i.a.createElement("div",{className:"Footer-right"},"Thanks to:",i.a.createElement("div",{className:"Footer-thanks"},i.a.createElement(c.b,{to:"https://spotify.com/"},"Spotify")),i.a.createElement("div",{className:"Footer-thanks"},i.a.createElement(c.b,{to:"https://mixedinkey.com/"},"Mixed In Key")))))}),G=(a(174),document.getElementById("modal-root")),V=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleBackdropClick=function(e){e&&e.stopPropagation(),e.target===e.currentTarget&&a.props.onHideModal()},a.el=document.createElement("div"),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){G.appendChild(this.el),D.lockVerticalScrolling(),D.addBlur()}},{key:"componentWillUnmount",value:function(){D.unlockVerticalScrolling(),D.removeBlur(),G.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.background,a=e.children,n=a.props?a.props.className:"";return Object(o.createPortal)(i.a.createElement("div",{className:W("Modal",{"Modal-no-background":!t}),onClick:this.handleBackdropClick},i.a.cloneElement(a,{className:W("Modal-children",n)})),this.el)}}]),t}(n.Component);V.defaultProps={background:!0,children:{},onHideModal:function(){}};var X=Object(s.b)()(V),J=(a(175),a(176),a(177),function(e){function t(e){var a;return Object(A.a)(this,t),a=Object(O.a)(this,Object(x.a)(t).call(this,e)),e.dispatch(I.setAppStoreBool("isMobile",D.isMobile())),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.dispatch;if(!t){var n=z.getUrlParams();n.access_token&&(console.log("Setting Spotify access token..."),a(R.setToken(n.access_token)),a(R.getUser()))}}},{key:"render",value:function(){var e=this.props,t=e.pathname,a=e.children,n=e.isMobile,o=e.showAuthModal;return i.a.createElement("div",{className:W("AppTemplate",{"AppTemplate-m":n})},!(n&&"/"!==t)&&i.a.createElement(Y,{pathname:t}),a,o&&i.a.createElement(X,{onHideModal:this.handleHideModal,background:!1},i.a.createElement("div",{className:"AppTemplate-auth-modal"},i.a.createElement("div",{className:"AppTemplate-auth-header"},"Please reauthorize Alphasetize"),i.a.createElement("div",{className:"AppTemplate-auth-btn"},i.a.createElement(F,null)))),"/create"!==t&&i.a.createElement(q,null))}}]),t}(n.Component)),Q=Object(l.d)(Object(s.b)(function(e,t){return{isMobile:"undefined"===typeof e.app.isMobile||e.app.isMobile,pathname:t.location.pathname,showAuthModal:e.app.showAuthModal,token:e.user.accessToken}})(J)),$=(a(178),{isInsideCircle:function(e){var t=e.mouse,a=e.img,n=e.radius||a.clientHeight/2,i=a.clientHeight/2,o=a.offsetTop+i,r=a.offsetLeft+i,s=a.offsetParent?a.offsetParent.offsetTop:0,c=a.offsetParent?a.offsetParent.offsetLeft:0,l=t.pageY,u=t.pageX;return Math.sqrt(Math.pow(o+s-l,2)+Math.pow(r+c-u,2))<=n},isMouseInsideCircle:function(e){var t=e.mouse,a=e.img;return $.isInsideCircle({mouse:t,img:a})},getSection:function(e){var t=e.mouse,a=e.img,n=$.getHourPosition({mouse:t,img:a});return{hour:n.hour,rotation:n.rotation,ring:$.getRingPosition({mouse:t,img:a})}},getHourPosition:function(e){var t=e.mouse,a=e.img,n=a.clientHeight/2,i=a.offsetTop+n,o=a.offsetLeft+n,r=a.offsetParent?a.offsetParent.offsetTop:0,s=a.offsetParent?a.offsetParent.offsetLeft:0,c=t.pageY,l=t.pageX,u=180*Math.atan2(i+r-c,o+s-l)/Math.PI,m=u>0?u:360+u,d=m-90>=0?m-90:270+m;return d-15<0?{hour:12,rotation:0}:d-15<30?{hour:1,rotation:30}:d-15<60?{hour:2,rotation:60}:d-15<90?{hour:3,rotation:90}:d-15<120?{hour:4,rotation:120}:d-15<150?{hour:5,rotation:150}:d-15<180?{hour:6,rotation:180}:d-15<210?{hour:7,rotation:210}:d-15<240?{hour:8,rotation:240}:d-15<270?{hour:9,rotation:270}:d-15<300?{hour:10,rotation:300}:d-15<330?{hour:11,rotation:330}:{hour:12,rotation:0}},getRingPosition:function(e){var t=e.mouse,a=e.img,n=a.width/6.1,i=a.width/2.86;return!$.isInsideCircle({mouse:t,img:a,radius:n})&&($.isInsideCircle({mouse:t,img:a,radius:i})?"A":"B")}}),Z=$,ee=a(105),te=a.n(ee),ae=a(106),ne=a.n(ae),ie=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleMouseMove=function(e){var t=a.state,n=t.hasTapped,i=t.hoverSection;if(Z.isMouseInsideCircle({mouse:e,img:a.imageRef.current})){n||a.setState({hasTapped:!0});var o=Z.getSection({mouse:e,img:a.imageRef.current});i.hour===o.hour&&i.ring===o.ring||a.setState({hoverSection:o})}else(i.hour||i.ring)&&a.setState({hoverSection:{}})},a.renderWheelCover=function(){var e=a.state.hoverSection,t=e.hour,o=e.ring,r=e.rotation;if(!t||!o)return null;var s={transform:"rotate(".concat(r-("A"===o?45:75),"deg)")},c={transform:"rotate(".concat(r-("B"===o?45:75),"deg)")},l=a.imageRef.current&&a.imageRef.current.width,u=l*(95/300),m=.7*l,d=.2*l,h=l*(353/300),p=1.44*l,v=l,f=(l-m)/2,b=l*(599/300),g=l*(733/300);return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"Wheel-cover",style:s},i.a.createElement("svg",{className:"Wheel-svg-inner",height:m,width:m},i.a.createElement("circle",{cx:m/2,cy:m/2,r:(m/2+u/2)/2-2,opacity:"0.8",strokeWidth:d,strokeDasharray:"A"===o?h:p}))),i.a.createElement("div",{className:"Wheel-cover",style:c},i.a.createElement("svg",{className:"Wheel-image-outer",height:v,width:v},i.a.createElement("circle",{cx:v/2,cy:v/2,r:(v/2+m/2)/2,opacity:"0.8",strokeWidth:f,strokeDasharray:"B"===o?b:g}))))},a.state={hasTapped:!1,hoverSection:{},touchX:null,touchY:null},a.imageRef=i.a.createRef(),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("touchend",this.handleMouseDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("touchend",this.handleMouseDown)}},{key:"render",value:function(){var e=this.state.hasTapped;return i.a.createElement("div",{className:"Wheel-image-container"},i.a.createElement("img",{className:"Wheel-image",ref:this.imageRef,src:te.a,alt:"camelotWheel"}),!e&&i.a.createElement("img",{className:"Wheel-icon-tap",src:ne.a,alt:"icon-tap"}),this.renderWheelCover())}}]),t}(n.Component),oe=Object(l.d)(Object(s.b)()(ie)),re=(a(179),a(107)),se=a.n(re),ce=a(108),le=a.n(ce),ue=a(109),me=a.n(ue),de=a(110),he=a.n(de),pe=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).observerCallback=function(e,t){e.forEach(function(e){e.isIntersecting&&(t.unobserve(a.imgRef.current),a.isTopVisible=!0,a.forceUpdate())})},a.handleSpotifyAuth=function(e){e.preventDefault();var t=a.props,n=t.token,i=t.history;z.getUrlParams().access_token||n?(console.log("Already authenticated!"),i.push(U.CREAT_URI)):window.location.href=D.getSpotifyAuthUrl()},a.renderTop=function(){var e=a.props.isMobile;return i.a.createElement("section",null,i.a.createElement("div",{className:"About-section About-top"},i.a.createElement("div",{className:"About-title-section"},i.a.createElement("h1",{className:"About-header"},"Your sets ",i.a.createElement("br",null)," in harmony"),i.a.createElement("h2",{className:"About-header-2"},"Alphasetize helps you order songs in your sets based on key compatibility."),i.a.createElement("div",{className:"About-auth-section"},i.a.createElement("div",{className:"About-auth-container"},i.a.createElement(F,null)))),i.a.createElement("div",{className:"About-scene"},i.a.createElement("img",{className:"About-controller-img ".concat(a.isTopVisible&&"visible"),alt:"controller-img",src:he.a,ref:a.imgRef})),!e&&!1))},a.renderOutline=function(){return i.a.createElement("section",{className:"About-white"},i.a.createElement("div",{className:"About-section"},i.a.createElement("div",{className:"About-description"},i.a.createElement("div",{className:"About-description-tile"},i.a.createElement("div",{className:"About-description-top"},i.a.createElement("img",{className:"About-icon",src:me.a,alt:"icon-question"}),i.a.createElement("div",{className:"About-subheader"},"The Problem")),i.a.createElement("div",{className:"About-p"},"Have you ever noticed the uncomfortable dissonance when mixing two songs with clashing pitches?",i.a.createElement("div",{className:"About-link"},i.a.createElement("a",{className:"link",href:"https://study.com/academy/lesson/dissonant-definition-music-harmony-chords.html"},"Dissonance?")))),i.a.createElement("div",{className:"About-description-tile"},i.a.createElement("div",{className:"About-description-top"},i.a.createElement("img",{className:"About-icon",src:se.a,alt:"icon-bulb"}),i.a.createElement("div",{className:"About-subheader"},"The Solution")),i.a.createElement("div",{className:"About-p"},"Alphasetize shows you which songs are harmonically compatible to keep transitions silky smooth.",i.a.createElement("div",{className:"About-link"},i.a.createElement("a",{className:"link",href:"/create",onClick:a.handleSpotifyAuth},"Link your Spotify account")))),i.a.createElement("div",{className:"About-description-tile"},i.a.createElement("div",{className:"About-description-top"},i.a.createElement("img",{className:"About-icon",src:le.a,alt:"icon-gear"}),i.a.createElement("div",{className:"About-subheader"},"How it works")),i.a.createElement("div",{className:"About-p"},"The Camelot wheel is a visual representation of which keys are compatible with each other.",i.a.createElement("div",{className:"About-link"},i.a.createElement("a",{className:"link",href:"#camelot-wheel"},"Read more below")))))))},a.renderHowTo=function(){return i.a.createElement("section",null,i.a.createElement("div",{id:"camelot-wheel",className:"About-section About-section-4"},i.a.createElement("div",{className:"About-section-left"},i.a.createElement("h3",{className:"About-header-3"},"The Camelot Wheel"),i.a.createElement("div",{className:"About-subsection"},"The camelot wheel is visual aid for harmonic mixing. Each musical key is assigned a keycode number from one to twelve, like hours around a clock.",i.a.createElement("br",null),i.a.createElement("br",null),"There are two ways to select a compatible song:",i.a.createElement("div",{className:"About-numeral"},i.a.createElement("span",{className:"gray"},"1."),' Adjacent Hours. Choose a keycode within one "hour" of your current keycode. For example: if you are in 8A, you can play 7A, 8A or 9A next.'),i.a.createElement("div",{className:"About-numeral"},i.a.createElement("span",{className:"gray"},"2."),' Adjacent Rings. You can also mix between inner and outer wheels if you stay in the same "hour." For example, try mixing from 8A to 8B, and notice the change in melody as you go from Minor to Major.'),i.a.createElement("div",{className:"About-link"},i.a.createElement("a",Object(d.a)({className:"link",href:"#camelot-wheel",target:"_blank",rel:"noopener noreferrer"},"href","http://www.harmonic-mixing.com/howto.aspx"),"Learn more")))),i.a.createElement("div",{className:"About-section-right"},i.a.createElement(oe,null))))},a.imgRef=i.a.createRef(),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){if(this.imgRef.current){this.observer=new IntersectionObserver(this.observerCallback,{root:null,rootMargin:"-100px",threshold:0}),this.observer.observe(this.imgRef.current)}}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"render",value:function(){return i.a.createElement("div",{className:"About"},this.renderTop(),this.renderOutline(),this.renderHowTo())}}]),t}(n.Component),ve=Object(l.d)(Object(s.b)(function(e){return{isMobile:e.app.isMobile}})(pe)),fe=(a(180),a(34)),be={addTrack:function(e){return{type:"ADD_TRACK",track:e}},addTracks:function(e){return{type:"ADD_TRACKS",tracks:e}},removeTrack:function(e){return{type:"REMOVE_TRACK",index:e}},moveTrack:function(e){return{type:"MOVE_TRACK",startIndex:e.startIndex,endIndex:e.endIndex}}},ge=function(e){return Math.round(100*Number(e))},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?"":t,n=e.artists,i=void 0===n?"":n,o=e.name,r=void 0===o?"":o,s=e.duration_ms,c=void 0===s?0:s,l=e.preview_url,u=void 0===l?"":l,m=e.acousticness,d=void 0===m?0:m,h=e.danceability,p=void 0===h?0:h,v=e.energy,f=void 0===v?0:v,b=e.key,g=void 0===b?0:b,E=e.mode,y=void 0===E?0:E,k=e.tempo,M=void 0===k?0:k,N=e.time_signature,w=void 0===N?0:N,A=e.valence,C=void 0===A?0:A;this.id=String(a),this.artists=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("string"===typeof e)return e;var t=[];return e.forEach(function(e){t.push(String(e.name))}),t.join(", ")}(i),this.name=String(r),this.duration=Number(c),this.previewUrl=String(u),this.acousticness=ge(d),this.danceability=ge(p),this.energy=ge(f),this.key=function(e,t){return e<0?null:U.KEYCODE_TO_KEY[e]+(t?"m":"")}(g,y),this.camKey=function(e){return U.KEYCODE_TO_CAMELOT_KEY[e]}(this.key),this.tempo=Math.round(Number(M)),this.timeSignature=Number(w),this.valence=ge(C)},ye={getTrackBasicByQuery:function(e){return function(t){return t(P.spotify.searchBasic(e)).then(function(e){var t=e.tracks&&e.tracks.items;return t||!1})}},getTrackWithBasicAndFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return t(ye.getTrackFeaturesByIds(e.id)).then(function(a){var n=a.audio_features[0],i=new Ee(E()({},e,n));return t(be.addTrack(i))})}},getTrackFeaturesByIds:function(e){return function(t,a){return t(P.spotify.searchFeatures(e))}}},ke=ye,Me=(a(181),{getArtists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],[]);return e.forEach(function(e){t.push(e.name)}),t.join(", ")},getText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[],n=[],o="";return Array.isArray(e)?(a=e,o=","):a=e.split(" "),a.forEach(function(e){var a="";0===e.indexOf(t)?(n.push(i.a.createElement("span",{className:"Search-item-match"},t)),a=e.slice(t.length,e.length)):a=e,n.push(i.a.createElement("span",null,"".concat(a).concat(o," ")))}),n}}),Ne=a(111),we=a.n(Ne),Ae=(a(246),a(46)),Ce=a.n(Ae),Oe=27,xe=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleClear=function(){(0,a.props.onClear)(),a.focusInput()},a.focusInput=function(){(0,a.props.onFocus)(),a.input.current.focus()},a.handleKeyDown=function(e){var t=a.props.onKeyDown;e.which===Oe&&e.target.blur(),t&&t(e)},a.input=i.a.createRef(),a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.border,a=e.className,n=e.customTagClassName,o=e.disabled,r=e.error,s=e.fixedSize,c=e.full,l=e.includeClear,u=e.isActive,m=e.label,d=e.size,h=e.type,p=e.value,v=we()(this.props,["border","customTagClassName","dispatch","error","fixedSize","full","includeClear","isActive","onClear","label","size"]),f="textarea"===h?"textarea":"input";return i.a.createElement("div",{className:W("Input",a)},m&&i.a.createElement("div",{className:"Input-label"},m),i.a.createElement(f,Object.assign({},v,{className:W("Input-element",n,{"Input-disabled":o,"Input-element-border":t,"Input-element-no-border":!t,"Input-error":r,"Input-fixed-size":s,"Input-full":c,"Input-lg":"lg"===d,"Input-xl":"xl"===d,"Input-textarea":"textarea"===h,"Utils-text-overflow":"textarea"!==h}),ref:this.input,onKeyDown:this.handleKeyDown})),l&&u&&p&&i.a.createElement("div",{className:"Input-x Utils-horiz-center",onClick:this.handleClear},i.a.createElement("img",{alt:"IconX",src:Ce.a,className:"Input-icon-x",height:"16",width:"16"})),r&&i.a.createElement("div",{className:"Input-alert"},r))}}]),t}(i.a.Component);xe.defaultProps={border:!0,className:"",customTagClassName:null,disabled:!1,error:"",fixedSize:!1,isActive:!1,label:"",onCancel:function(){},onClear:function(){},onFocus:function(){},required:!1,size:"md",type:"text"};var Te=Object(s.b)(null,null,null,{forwardRef:!0})(xe),Ie=a(112),Se=a.n(Ie),Le=a(113),je=a.n(Le),Pe=function(e,t){var a;return function(){clearTimeout(a),a=setTimeout(function(){e()},t)}},He={ESC:27,ENTER:13,UP_ARROW:38,DOWN_ARROW:40},Re=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleFocus=function(){a.props.onFocus(),window.addEventListener("mousedown",a.handleMouseDown),a.setState({isActive:!0})},a.handleMouseDown=function(e){r.a.findDOMNode(Object(fe.a)(Object(fe.a)(a))).contains(e.target)||a.handleClose()},a.handleClose=function(){var e=a.props.onBlur;a.setState({isActive:!1}),e()},a.handleMouseOver=function(e){a.setState({index:e})},a.handleMouseLeave=function(){a.setState({index:-1})},a.handleChange=function(e){var t=e.target.value;a.setState({value:t}),a.getResults()},a.getResults=Pe(function(){var e=a.props.dispatch,t=a.state.value;return e(ke.getTrackBasicByQuery(t)).then(function(e){e.length?a.setState({suggestions:e}):a.setState({suggestions:[]})})},100),a.handleKeyDown=function(e){var t=a.state,n=t.index,i=t.suggestions,o=e.which;if(o===He.UP_ARROW){var r=Math.max(n-1,0);a.setState({index:r}),e.preventDefault()}else if(o===He.DOWN_ARROW){var s=Math.min(n+1,i.length-1);a.setState({index:s}),e.preventDefault()}else o===He.ESC?e.preventDefault():o===He.ENTER&&(e.preventDefault(),a.handleSelect())},a.onClear=function(){a.setState({value:""})},a.handleSelect=function(e){var t=a.props.dispatch,n=a.state,i=n.index,o=n.suggestions[i];return a.handleClose(),t(ke.getTrackWithBasicAndFeatures(o))},a.renderSuggestions=function(){var e=a.state,t=e.suggestions,n=e.value;return i.a.createElement("div",{className:W("Autocomplete-suggestions-container",{"Autocomplete-suggestions-container-empty":!t.length||!n}),onMouseLeave:a.handleMouseLeave},n&&t.map(function(e,t){return a.renderItem(e,t)}))},a.renderItem=function(e,t){var n=a.state.index;return i.a.createElement("div",{className:W("Autocomplete-item-container",{"Autocomplete-item-container-active":n===t}),onMouseOver:function(){return a.handleMouseOver(t)},onClick:a.handleSelect,key:e+t},i.a.createElement("div",{className:"Autocomplete-item"},Me.getArtists(e.artists,e.featured)," - ",e.name))},a.state={index:0,isActive:!1,suggestions:[],value:""},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleMouseDown)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isActive,n=t.value;return i.a.createElement("div",{className:W("Autocomplete-container",{"Autocomplete-container-active":a})},i.a.createElement("div",{className:"Autocomplete-input-container"},a?i.a.createElement("img",{alt:"IconSearch",src:Se.a,className:"Autocomplete-icon-back",height:"16",width:"16",onClick:this.handleClose}):i.a.createElement("img",{alt:"IconSearch",src:je.a,className:"Autocomplete-icon-search",height:"16",width:"16"}),i.a.createElement(Te,{className:"Autocomplete-input",border:!1,full:!0,includeClear:!0,isActive:a,onChange:function(t){return e.handleChange(t)},onFocus:this.handleFocus,onClear:this.onClear,onKeyDown:function(t){return e.handleKeyDown(t)},size:"xl",value:n})),a&&this.renderSuggestions())}}]),t}(n.Component);Re.defaultProps={onBlur:function(){},onFocus:function(){}};var De=Object(s.b)(function(e){return{isMobile:e.app.isMobile}})(Re),Be=(a(247),Object(s.b)()(function(e){var t=e.onHideModal;return i.a.createElement("div",{className:"HelpModal"},i.a.createElement("h1",{className:"HelpModal-header"},"HOW THIS WORKS"),i.a.createElement("div",{className:"HelpModal-subheader"},"This ",i.a.createElement("span",{className:"HelpModal-tab"},"Create")," page is for organizing your set."),i.a.createElement("ul",{className:"HelpModal-details"},i.a.createElement("li",null,"Import a song by searching in the search field"),i.a.createElement("li",null,"Import an existing playlist from your library"),i.a.createElement("li",null,"Click and drag songs to reorder your set")),i.a.createElement("div",{className:"HelpModal-subheader"},"What do the colors mean?"),i.a.createElement("ul",{className:"HelpModal-details"},i.a.createElement("li",{className:"HelpModal-point"},"Clicking on a song will highlight other harmonically compatible songs",i.a.createElement("ul",{className:"HelpModal-details-colors"},i.a.createElement("li",null,i.a.createElement("span",{className:"HelpModal-blue"},"Blue:")," ","Identical key"),i.a.createElement("li",null,i.a.createElement("span",{className:"HelpModal-green"},"Green:")," ","Different key - same scale"),i.a.createElement("li",null,i.a.createElement("span",{className:"HelpModal-yellow"},"Yellow:")," ","Same key - parallel scale"),i.a.createElement("li",null,i.a.createElement("span",{className:"HelpModal-gray"},"None:")," ","Incompatible key"))),i.a.createElement("li",null,"Read more on"," ",i.a.createElement("span",{className:"HelpModal-tab-link"},i.a.createElement(c.b,{to:"/about"},"About"))," ","page for details")),i.a.createElement("div",{className:"HelpModal-btn",onClick:t},"GOT IT"))})),_e=a(114),Ue=a.n(_e),We=a(19),ze=a.n(We),Ke=(a(276),{getMatches:function(e,t){var a=t[e],n=[],i=[],o=[];if(!a)return{perfectMatches:n,keyMatches:i,modeMatches:o};var r=a.camKey,s=Number(r.slice(0,r.length-1)),c=(s+1===13?1:s+1)+r[r.length-1],l=(s-1===0?12:s-1)+r[r.length-1],u=s+("A"===r[r.length-1]?"B":"A");return t.forEach(function(t,a){a===e||(t.camKey===r?n.push(a):t.camKey===c||t.camKey===l?i.push(a):t.camKey===u&&o.push(a))}),{perfectMatches:n,keyMatches:i,modeMatches:o}},hasListChanged:function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!0;return!1}}),Fe=a(47),Ye=a.n(Fe),qe=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleMouseOver=function(e){a.setState({hoverIndex:e})},a.handleMouseLeaveList=function(){a.setState({isDragging:!1})},a.handleMouseOverHeader=function(){a.setState({hoverIndex:-1})},a.handleSelect=function(){var e=a.state;e.activeIndex===e.hoverIndex?a.resetMatches():a.setMatches()},a.setMatches=function(e){var t=a.props.list,n=a.state,i=n.activeIndex,o=n.hoverIndex,r=e?i:o;if(!(r<0)){var s=Ke.getMatches(r,t),c=s.perfectMatches,l=s.keyMatches,u=s.modeMatches;a.setState({activeIndex:r,perfectMatches:c,keyMatches:l,modeMatches:u})}},a.resetMatches=function(){a.setState({activeIndex:-1,perfectMatches:[],keyMatches:[],modeMatches:[]})},a.handleMouseDown=function(){window.addEventListener("mousemove",a.handleMouseMove)},a.handleMouseMove=function(){window.removeEventListener("mousemove",a.handleMouseMove);var e=a.state.hoverIndex;a.setState({isDragging:!0,dragStartIndex:e})},a.handleMouseUp=function(){window.removeEventListener("mousemove",a.handleMouseMove);var e=a.props.dispatch,t=a.state,n=t.isDragging,i=t.activeIndex,o=t.dragStartIndex,r=t.hoverIndex,s=i===o?r:i;n&&o>-1&&(a.setState({isDragging:!1,activeIndex:s}),e(be.moveTrack({startIndex:o,endIndex:r})))},a.handleRemove=function(e){e.stopPropagation();var t=a.props.dispatch,n=a.state.hoverIndex;return t(be.removeTrack(n))},a.renderItem=function(e){e.acousticness;var t=e.artists,n=e.camKey,o=(e.danceability,e.duration,e.energy),r=e.id,s=e.key,c=(e.mode,e.name),l=(e.previewUrl,e.tempo),u=(e.timeSignature,e.valence,e.idx),m=a.state,d=m.isDragging,h=m.activeIndex,p=m.dragStartIndex,v=m.hoverIndex,f=m.perfectMatches,b=m.keyMatches,g=m.modeMatches,E=h===u,y=!d&&v===u,k=d&&v===u,M=f.includes(u),N=b.includes(u),w=g.includes(u);return i.a.createElement("li",{className:W("List-item",{"List-item-hover":y&&!d,"List-item-drag":d&&p===u,"List-item-drag-over":k&&!E,"List-item-active":E,"List-item-active-hover":E&&y,"List-item-perfect-match":M,"List-item-perfect-match-hover":M&&y,"List-item-key-match":N,"List-item-key-match-hover":N&&y,"List-item-mode-match":w,"List-item-mode-match-hover":w&&y}),key:r+u,onMouseOver:function(){return a.handleMouseOver(u)},onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp,onClick:a.handleSelect},i.a.createElement("div",{className:"List-item-sub List-item-order"},u+1),i.a.createElement("div",{className:"List-item-sub List-item-title"},c),i.a.createElement("div",{className:"List-item-sub List-item-artist"},t),i.a.createElement("div",{className:"List-item-sub List-item-cam-key"},n),i.a.createElement("div",{className:"List-item-sub List-item-key"},s),i.a.createElement("div",{className:"List-item-sub List-item-tempo"},l),i.a.createElement("div",{className:"List-item-sub List-item-energy"},o),i.a.createElement("div",{className:"List-item-sub List-item-close",onClick:a.handleRemove},i.a.createElement("img",{src:Ye.a,alt:"x",width:"12px",height:"12px"})))},a.state={hoverIndex:-1,activeIndex:-1,dragStartIndex:-1,dragEndIndex:-1,perfectMatches:[],keyMatches:[],modeMatches:[]},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.list;Ke.hasListChanged(t,e.list)&&this.setMatches(!0)}},{key:"render",value:function(){var e=this,t=this.props.list;return i.a.createElement("div",{className:"List-container"},i.a.createElement("div",{className:"List-item-header",onMouseOver:this.handleMouseOverHeader},i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"List-item-sub List-item-order"},"#"),i.a.createElement("div",{className:"List-item-sub List-item-title"},"TITLE"),i.a.createElement("div",{className:"List-item-sub List-item-artist"},"ARTIST"),i.a.createElement("div",{className:"List-item-sub List-item-cam-key"},"CODE"),i.a.createElement("div",{className:"List-item-sub List-item-key"},"KEY"),i.a.createElement("div",{className:"List-item-sub List-item-tempo"},"TEMPO"),i.a.createElement("div",{className:"List-item-sub List-item-energy"},"ENERGY"),i.a.createElement("div",{className:"List-item-sub List-item-close"}))),i.a.createElement("ul",{className:"List",onMouseLeave:this.handleMouseLeaveList},ze()(t,function(t,a){return e.renderItem(Object(h.a)({},t,{idx:a}))})))}}]),t}(n.Component);qe.defaultProps={list:[]};var Ge=Object(s.b)()(qe),Ve=(a(277),{getMatches:function(e,t){var a=t[e].camKey,n=Number(a.slice(0,a.length-1)),i=(n+1===13?1:n+1)+a[a.length-1],o=(n-1===0?12:n-1)+a[a.length-1],r=n+("A"===a[a.length-1]?"B":"A"),s=[],c=[],l=[];return t.forEach(function(t,n){n===e||(t.camKey===a?s.push(n):t.camKey===i||t.camKey===o?c.push(n):t.camKey===r&&l.push(n))}),{perfectMatches:s,keyMatches:c,modeMatches:l}},hasListChanged:function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!0;return!1}}),Xe=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleSelect=function(e){a.state.activeIndex===e?a.resetMatches():a.setMatches(e)},a.setMatches=function(e){var t=a.props.list;if(!(e<0)){var n=Ve.getMatches(e,t),i=n.perfectMatches,o=n.keyMatches,r=n.modeMatches;a.setState({activeIndex:e,perfectMatches:i,keyMatches:o,modeMatches:r})}},a.resetMatches=function(){a.setState({activeIndex:-1,perfectMatches:[],keyMatches:[],modeMatches:[]})},a.handleTouchDown=function(e){window.addEventListMobileener("touchmove",a.handleTouchMove),console.log("touchdown"),a.setState({dragStartIndex:e})},a.handleTouchMove=function(){window.removeEventListMobileener("touchmove",a.handleTouchMove),window.addEventListMobileener("touchcancel",a.handleTouchEnd),window.addEventListMobileener("touchend",a.handleTouchEnd),console.log("touchMove"),a.setState({isDragging:!0})},a.handleTouchEnd=function(){window.removeEventListMobileener("mousemove",a.handleMouseMove);var e=a.props.dispatch,t=a.state,n=t.isDragging,i=t.activeIndex,o=t.dragStartIndex,r=t.hoverIndex,s=i===o?r:i;n&&o>-1&&(a.setState({isDragging:!1,activeIndex:s}),e(be.moveTrack({startIndex:o,endIndex:r})))},a.handleRemove=function(e){e.stopPropagation();var t=a.props.dispatch,n=a.state.hoverIndex;return t(be.removeTrack(n))},a.renderItem=function(e){e.acousticness;var t=e.artists,n=e.camKey,o=(e.danceability,e.duration,e.energy,e.id),r=(e.key,e.mode,e.name),s=(e.previewUrl,e.tempo,e.timeSignature,e.valence,e.idx),c=a.state,l=c.isDragging,u=c.activeIndex,m=c.hoverIndex,d=c.perfectMatches,h=c.keyMatches,p=c.modeMatches,v=u===s,f=!l&&m===s,b=l&&m===s,g=d.includes(s),E=h.includes(s),y=p.includes(s);return i.a.createElement("li",{className:W("ListMobile-item",{"ListMobile-item-hover":f&&!l,"ListMobile-item-drag-over":b&&!v,"ListMobile-item-active":v,"ListMobile-item-active-hover":v&&f,"ListMobile-item-perfect-match":g,"ListMobile-item-perfect-match-hover":g&&f,"ListMobile-item-key-match":E,"ListMobile-item-key-match-hover":E&&f,"ListMobile-item-mode-match":y,"ListMobile-item-mode-match-hover":y&&f}),key:o+s,onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp,onClick:function(){return a.handleSelect(s)}},i.a.createElement("div",{className:"ListMobile-item-sub ListMobile-item-order"},s+1),i.a.createElement("div",{className:"ListMobile-item-info"},i.a.createElement("div",{className:"ListMobile-item-sub ListMobile-item-title"},i.a.createElement("span",null,r)),i.a.createElement("div",{className:"ListMobile-item-sub ListMobile-item-artist"},i.a.createElement("span",null,t))),i.a.createElement("div",{className:"ListMobile-item-sub ListMobile-item-cam-key"},n),i.a.createElement("div",{className:"ListMobile-item-sub ListMobile-item-close",onClick:a.handleRemove},i.a.createElement("img",{src:Ye.a,alt:"x",width:"12px",height:"12px"})))},a.state={activeIndex:-1,dragStartIndex:-1,dragEndIndex:-1,perfectMatches:[],keyMatches:[],modeMatches:[]},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.list;Ve.hasListChanged(t,e.list)}},{key:"render",value:function(){var e=this,t=this.props.list;return i.a.createElement("div",{className:"ListMobile-container"},i.a.createElement("ul",{className:"ListMobile",onMouseLeave:this.handleMouseLeaveListMobile},ze()(t,function(t,a){return e.renderItem(Object(h.a)({},t,{idx:a}))})))}}]),t}(n.Component);Xe.defaultProps={list:[]};var Je=Object(s.b)()(Xe),Qe=(a(278),function(e){function t(){return Object(A.a)(this,t),Object(O.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onHideModal,a=e.onClickImport,n=e.onClickExport,o=e.onClickHelp;return i.a.createElement("div",{className:"ModalAllOpts"},i.a.createElement("div",{className:"ModalAllOpts-x",onClick:t},i.a.createElement("img",{height:"16",src:Ce.a,alt:"icon-dots"})),i.a.createElement("div",{className:"ModalAllOpts-btn",onClick:a},"Import playlist"),i.a.createElement("div",{className:"ModalAllOpts-btn",onClick:n},"Export playlist"),i.a.createElement(c.b,{to:"/"},i.a.createElement("div",{className:"ModalAllOpts-btn"},"Home")),i.a.createElement("div",{className:"ModalAllOpts-btn",onClick:o},"Help"))}}]),t}(n.Component)),$e=Object(s.b)()(Qe),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.images,a=void 0===t?[{}]:t,n=e.id,i=void 0===n?"":n,o=e.name,r=void 0===o?"":o,s=e.tracks,c=void 0===s?{}:s;this.images=function(e){return e.length?String(e[e.length-1].url):""}(a),this.id=String(i),this.name=String(r),this.length=Number(c.total||0),this.tracksUrl=String(c.href||"")},et={setPlaylists:function(e){return{type:"ADD_PLAYLISTS",playlists:ze()(e,function(e){return new Ze(e)})}},getPlaylists:function(){return function(e,t){return e(P.spotify.getPlaylists()).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e})}},getPlaylist:function(e){return function(t,a){return t(P.spotify.getPlaylist(e)).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e})}},getAndSetPlaylist:function(e){return function(t,a){var n;return t(et.getPlaylist(e)).then(function(e){n=e.tracks.items;var a=ze()(n,function(e){return e.track&&e.track.id||""});return t(ke.getTrackFeaturesByIds(a.join(",")))}).then(function(e){var t=e.audio_features;if(!t)return!1;for(var a=[],i=0;i<t.length;i++)a.push(new Ee(E()({},n[i].track,t[i])));return a}).then(function(e){return t(be.addTracks(e))})}},exportPlaylist:function(e){var t=e.title,a=e.description,n=void 0===a?"":a;return function(e,a){return e(et.createEmptyPlaylist({title:t,description:n})).then(function(t){return e(et.addTracksToPlaylist(t))})}},createEmptyPlaylist:function(e){var t=e.title,a=e.description;return function(e,n){var i=n().user.id;return e(P.spotify.createPlaylist({userId:i,title:t,description:a})).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e})}},addTracksToPlaylist:function(e){return function(t,a){var n=e.id,i=a().tracks.list,o=ze()(i,function(e){return"spotify:track:"+e.id});return t(P.spotify.addTracksToPlaylist({playlistId:n,tracks:o})).then(function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e})}}},tt=et,at=(a(279),100),nt=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleClick=function(e){a.firstClickWithinTime&&a.state.activeIndex===e?a.handleImport():(a.firstClickWithinTime=!0,setTimeout(function(){a.firstClickWithinTime=!1},300),a.setState({activeIndex:e}))},a.handleImport=function(){var e=a.props,t=e.dispatch,n=e.playlists,i=e.onHideModal,o=a.state.activeIndex,r=n[o];if(!(o<0)){if(r.length>100)return a.setState({showError:!0}),void setTimeout(function(){return a.setState({showError:!1})},4e3);t(tt.getAndSetPlaylist(r.id)).catch(function(e){return console.log(e)}),i()}},a.handleCancel=function(){(0,a.props.onHideModal)()},a.renderPlaylist=function(e,t){var n=a.state.activeIndex,o=e.length>at;return i.a.createElement("div",{className:W("PlaylistImport-playlist noselect",{"PlaylistImport-playlist-disable":o,"PlaylistImport-playlist-active":n===t}),key:e.id+t,onClick:function(){return a.handleClick(t,o)}},i.a.createElement("div",null,e.name),i.a.createElement("div",{className:"PlaylistImport-playlist-length"},e.length," songs"))},a.state={activeIndex:-1,showError:!1},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.props.playlists,a=this.state,n=a.showError,o=a.activeIndex;return i.a.createElement("div",{className:"PlaylistImport"},i.a.createElement("h1",{className:"PlaylistImport-header"},"YOUR PLAYLISTS"),i.a.createElement("div",{className:"PlaylistImport-container"},ze()(t,function(t,a){return e.renderPlaylist(t,a)})),i.a.createElement("div",{className:"PlaylistImport-bottom"},i.a.createElement("div",{className:"PlaylistImport-error-container"},i.a.createElement("div",{className:W("PlaylistImport-error",{"PlaylistImport-error-hidden":!n})},"Please select a playlist with less than"," ",at," songs")),i.a.createElement("div",{className:"PlaylistImport-btn-container"},i.a.createElement("div",{className:W("PlaylistImport-btn",{"PlaylistImport-btn-active":-1!==o}),onClick:this.handleImport},"IMPORT"),i.a.createElement("div",{className:"PlaylistImport-btn-cancel",onClick:this.handleCancel},"CANCEL"))))}}]),t}(n.Component);nt.defaultProps={playlists:[]};var it=Object(s.b)()(nt),ot=(a(280),a(115)),rt=a.n(ot),st=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleTextInput=function(e,t){a.setState(Object(d.a)({},e,{value:t.target.value,error:""}))},a.handleSubmit=function(e,t){var n=a.props,i=n.dispatch,o=n.onHideModal,r=a.state,s=r.title,c=r.description,l=E()({},s);if(!s.value.length)return l.error="Title cannot be blank",void a.setState({title:l});i(tt.exportPlaylist({title:s.value,description:c.value})).catch(function(e){return console.log(e)}),o()},a.handleCancel=function(){(0,a.props.onHideModal)()},a.state={title:{value:"",error:""},description:{value:"",error:""}},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showError,a=e.title,n=e.description;return i.a.createElement("div",{className:"PlaylistExport"},i.a.createElement("h1",{className:"PlaylistExport-header"},"EXPORT PLAYLIST"),i.a.createElement("div",{className:"PlaylistExport-subheader"},i.a.createElement("img",{alt:"IconPlaylist",src:rt.a,className:"PlaylistExport-icon-playlist",height:"24",width:"24"}),i.a.createElement("div",null,"Save your new setlist to your Spotify account")),i.a.createElement("form",{className:"PlaylistExport-container"},i.a.createElement(Te,{className:"PlaylistExport-input",label:"Title",error:a.error,maxLength:50,name:"title",onChange:this.handleTextInput.bind(null,"title"),required:!0,type:"title",value:a.value}),i.a.createElement(Te,{className:"PlaylistExport-input",label:"Description",error:n.error,maxLength:50,name:"description",onChange:this.handleTextInput.bind(null,"description"),required:!0,type:"description",value:n.value})),i.a.createElement("div",{className:"PlaylistExport-bottom"},i.a.createElement("div",{className:"PlaylistExport-error-container"},i.a.createElement("div",{className:W("PlaylistExport-error",{"PlaylistExport-error-hidden":!t})},"Please select a playlist with less than"," ",100," songs")),i.a.createElement("div",{className:"PlaylistExport-btn-container"},i.a.createElement("div",{className:"PlaylistExport-btn",onClick:this.handleSubmit},"SUBMIT"),i.a.createElement("div",{className:"PlaylistExport-btn-cancel",onClick:this.handleCancel},"CANCEL"))))}}]),t}(n.Component);st.defaultProps={playlists:[]};var ct=Object(s.b)()(st),lt=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(O.a)(this,Object(x.a)(t).call(this,e))).handleHelp=function(){a.setState({modalToShow:"help"})},a.handleImport=function(){var e=a.props.dispatch;return e(tt.getPlaylists()).then(function(t){return e(tt.setPlaylists(t.items))}).then(function(){return a.setState({modalToShow:"import"})}).catch(function(e){return console.log(e)})},a.handleExport=function(){a.setState({modalToShow:"export"})},a.handleHelp=function(){a.setState({modalToShow:"help"})},a.handleHideModal=function(){a.setState({modalToShow:null})},a.handleShowAllOptions=function(){a.setState({modalToShow:"allOptions"})},a.handleInputFocus=function(){a.setState({isInputActive:!0})},a.handleInputBlur=function(){a.setState({isInputActive:!1})},a.renderModal=function(){var e=a.props.playlists,t=a.state.modalToShow;return t?"allOptions"===t?i.a.createElement(X,{onHideModal:a.handleHideModal,background:!1},i.a.createElement($e,{onClickImport:a.handleImport,onClickExport:a.handleExport,onClickHelp:a.handleHelp,onHideModal:a.handleHideModal})):"help"===t?i.a.createElement(X,{onHideModal:a.handleHideModal},i.a.createElement(Be,{onHideModal:a.handleHideModal})):"import"===t?i.a.createElement(X,{onHideModal:a.handleHideModal},i.a.createElement(it,{playlists:e,onHideModal:a.handleHideModal})):"export"===t?i.a.createElement(X,{onHideModal:a.handleHideModal},i.a.createElement(ct,{onHideModal:a.handleHideModal})):void 0:null},a.renderMobileView=function(){var e=a.state.isInputActive;return i.a.createElement("div",{className:W("Create-top-m",{"Create-top-active-m":e})},i.a.createElement("div",{className:W("Create-autocomplete-m",{"Create-autocomplete-active-m":e})},i.a.createElement(De,{onBlur:a.handleInputBlur,onFocus:a.handleInputFocus})),i.a.createElement("div",{className:W("Create-playlist-m",{"Create-playlist-hidden-m":e}),onClick:a.handleShowAllOptions},i.a.createElement("div",{className:"Create-playlist-open"},i.a.createElement("img",{height:"16",src:Ue.a,alt:"icon-dots"}))))},a.renderAuthorizePrompt=function(){return i.a.createElement("div",{className:"Create-authorize"},i.a.createElement("div",{className:"Create-authorize-text"},"Log into your Spofity account and authorize Alphasetize to create your set!"),i.a.createElement(F,null))},a.state={modalToShow:null,fullCta:null,isInputActive:!1},a}return Object(T.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.list,a=e.isMobile,n=e.token;return i.a.createElement("div",{className:"Create"},this.renderModal(),a?this.renderMobileView():i.a.createElement("div",{className:"Create-top"},i.a.createElement("div",{className:"Create-autocomplete"},i.a.createElement(De,null)),i.a.createElement("div",{className:"Create-right"},i.a.createElement("div",{className:"Create-help noselect",onClick:this.handleHelp},"?"),i.a.createElement("div",{className:"Create-import noselect",onClick:this.handleImport},"IMPORT PLAYLIST"),i.a.createElement("div",{className:"Create-export noselect",onClick:this.handleExport},"EXPORT PLAYLIST"))),a?i.a.createElement(Je,{list:t}):i.a.createElement(Ge,{list:t}),!n&&this.renderAuthorizePrompt(),n&&!t.length&&i.a.createElement("div",{className:"Create-empty-list"},"Start searching or import a playlist!"))}}]),t}(n.Component),ut=Object(s.b)(function(e){return{isMobile:e.app.isMobile,list:e.tracks.list,playlists:e.playlists.playlists,token:e.user.accessToken}})(lt),mt=(a(281),a(116)),dt=a.n(mt),ht=a(117),pt=a.n(ht),vt=a(118),ft=a.n(vt),bt=function(e){function t(){return Object(A.a)(this,t),Object(O.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Contact"},i.a.createElement("div",{className:"Contact-content"},i.a.createElement("div",{className:"Contact-top"},i.a.createElement("div",{className:"Contact-title-section"},i.a.createElement("h1",{className:"Contact-header"},"Contact"),i.a.createElement("h2",{className:"Contact-header-2"},"Alphasetize was created by Eric Kwok"))),i.a.createElement("div",{className:"Contact-section"},i.a.createElement("div",{className:"Contact-description"},i.a.createElement("div",{className:"Contact-description-tile"},i.a.createElement("div",{className:"Contact-description-top"},i.a.createElement("img",{className:"Contact-icon",src:dt.a,alt:"icon-chat"}),i.a.createElement("div",{className:"Contact-subheader"},"Reach out")),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"mailto: erickwokdev@gmail.com"},"Email")),i.a.createElement("br",null),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"https://www.linkedin.com/in/eric-kwok/"},"Linked In")),i.a.createElement("br",null)),i.a.createElement("div",{className:"Contact-description-tile"},i.a.createElement("div",{className:"Contact-description-top"},i.a.createElement("img",{className:"Contact-icon",src:ft.a,alt:"icon-bulb"}),i.a.createElement("div",{className:"Contact-subheader"},"Music")),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"https://soundcloud.com/eks-official"},"SoundCloud")),i.a.createElement("br",null),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"https://open.spotify.com/user/xtz2r9shizlr37boi82pz14nt?si=vu8A27sYRhq_vukW0q19BQ"},"Spotify"))),i.a.createElement("div",{className:"Contact-description-tile"},i.a.createElement("div",{className:"Contact-description-top"},i.a.createElement("img",{className:"Contact-icon",src:pt.a,alt:"icon-code"}),i.a.createElement("div",{className:"Contact-subheader"},"Engineering")),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"https://github.com/kwokeric"},"GitHub")),i.a.createElement("br",null),i.a.createElement("div",{className:"Contact-link"},i.a.createElement("a",{className:"link",href:"https://erickwok.io/"},"erickwok.io")))))))}}]),t}(n.Component),gt=Object(l.d)(Object(s.b)(function(e){return{isMobile:e.app.isMobile}})(bt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(s.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.d)(w,e,Object(u.a)(m.a))}()},i.a.createElement(c.a,null,i.a.createElement(Q,null,i.a.createElement(l.a,{exact:!0,path:"/",component:ve}),i.a.createElement(l.a,{path:"/about",component:ve}),i.a.createElement(l.a,{path:"/create",component:ut}),i.a.createElement(l.a,{path:"/contact",component:gt})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},46:function(e,t,a){e.exports=a.p+"static/media/icon-x.6e423427.svg"},47:function(e,t,a){e.exports=a.p+"static/media/close.ca028cb4.svg"}},[[119,1,2]]]);
//# sourceMappingURL=main.270637e7.chunk.js.map